<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TokenFlow Dashboard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/colors.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/clickables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/controls.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/cerebras_logo.png') }}" type="image/x-icon">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/cerebras_logo.png') }}" type="image/x-icon">
</head>
<body>
    <div id="loader" class="loader">
        <img src="{{ url_for('static', filename='images/cerebras_logo.png') }}" alt="Loading...">
    </div>
    <div id="content" class="content">    
    <div class="container">
        <div class="header">
            <h1 class="title">TokenFlow</h1>
            <div class="logo">
                <img src="{{ url_for('static', filename='images/cerebras_logo.png') }}" alt="Cerebras Logo">
            </div>
        </div>
        <div class="controls-section">
            <div class="controls">
                <div class="dropdown-containers">
                    <div class="dropdown-container">
                        <select id="fileSelector" class="dropdown" onchange="loadData(0, true)">
                            {% for file in files %}
                                <option value="{{ file }}">{{ file.split('/')[-1] }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="dropdown-container">
                        <select id="stringLengthSelector" class="dropdown">
                            <!-- Options will be populated dynamically -->
                        </select>
                    </div>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <span class="color-box" style="background-color: #78fd68;"></span> Loss On
                    </div>
                    <div class="separator"></div>
                    <div class="legend-item">
                        <span class="color-box" style="background-color: #f35e5d;"></span> Attn. Off
                    </div>
                </div>            
            </div>
            <div class="fixed-sections">
                <!-- <div class="images-section">
                    <h2>Image(s)</h2>
                    <div class="multimodal-images-display">
                        <div class="image-block">
                            <img src="{{ url_for('static', filename='images/cerebras_logo.png') }}" alt="Image 1">
                            <p>/path/to/image</p>
                        </div>
                        <div class="image-block">
                            <img src="{{ url_for('static', filename='images/cerebras_logo.png') }}" alt="Image 1">
                            <p>/path/to/image</p>
                        </div>
                    </div>
                </div> -->
                <div class="top-tokens">
                    <h2>Top Tokens</h2>
                    <div class="token-list">
                        <ul id="tokensList"></ul>
                    </div>
                </div>
                <div class="stats">
                    <h2>Preprocessing Metadata</h2>
                    <table id="statsTable"></table>
                </div>
            </div>
        </div>
        <div class="main-content">
            <div class="dynamic-sections">
                <div id="input_strings_section" class="section">
                    <h3 class="section-title">Input Strings</h3>
                    <div id="input_strings_display" class="data-display"></div>
                </div>
                <div id="label_strings_section" class="section">
                    <h3 class="section-title">Label Strings</h3>
                    <div id="label_strings_display" class="data-display"></div>
                </div>
                <div id="input_ids_section" class="section">
                    <h3 class="section-title">Input IDs</h3>
                    <div id="input_ids_display" class="data-display"></div>
                </div>
                <div id="label_ids_section" class="section">
                    <h3 class="section-title">Label IDs</h3>
                    <div id="label_ids_display" class="data-display"></div>
                </div>
                <!-- <div id="input_loss_mask_section" class="section">
                    <h3 class="section-title">Input Loss Mask</h3>
                    <div id="input_loss_mask_display" class="data-display"></div>
                </div> -->
                <!-- Add other sections similarly -->
            </div>
        </div>
    </div>
    </div>
    <script src="{{ url_for('static', filename='js/hover.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            loadData(0, true);
        });
    </script>
    
</body>
</html>
